## coroutine
```
    def func1():
        print(1)
        print(2)
    def func2():
        print(3)
        print(4)
    func1()
    func2()
```
- **greenlet**
- **yield**
```
    def func():
        yield 1
        yield from func2()
        yield 2

    def func2():
        yield 3
        yield 4

    f1=func1()
    for item in f1:
        print(item)
```
- **asyncio**
```
    import asyncio
    @asyncio.coroutine
    def func1():
        print(1)
        yield from asyncio.sheep(2)
        print(2)
    
    @asyncio.coroutine
    def func2():
        print(3)
        yield from asyncio.sleep(2)
        print(4)

    tasks=[
        asyncio.ensure_future(func1()),
        asyncio.ensure_future(func2())
    ]

    loop =asyncio.get_even_loop()
    loop.run_until_complete(asyncio.wait(tasks))
```
- **async,await**
```
    import asyncio
    async def func1():
        print(1)
        await asyncio.sheep(2)
        print(2)
    
    async def func2():
        print(3)
        await asyncio.sleep(2)
        print(4)

    tasks=[
        asyncio.ensure_future(func1()),
        asyncio.ensure_future(func2())
    ]

    loop =asyncio.get_even_loop()
    loop.run_until_complete(asyncio.wait(tasks))
```
## Asynchronous Programming
- **asyncio**
```
import asyncio
async def func():
    print('hello world')

result=func()

asyncio.run(result)
```
- **await**
```
import asyncio
async def func():
    print('helloworld!')
    response=await asyncio.sleep(2)
    print('Over!',response)

asyncio.run(func())
```
```
import asyncio

async def others():
    print('start')
    await asyncio.sleep(2)
    print('end')
    return 'value'

async def func():
    print('execute inner code')
    response1=await others()
    print('Over!',response1)
    response2=await others()
    print('Over.',response2)

asyncio.run(func())
```
- **task**
Tasks are used to schedule coroutines concurrently
When a coroutine is wrapped  into a Task with functions like <u><font color=blue>asyncio.creat_task(<font color=red>coroutine object</font>)</font></u> the  coroutine is  automatically scheduled  to run soon
```
import asyncio

async def func():
    print(1)
    await asyncio.sleep(2)
    print(2)
    return 'value'

async def main():
    print('main start')
    task1=asyncio.creat_task(func())
    task2=asyncio.creat_task(func())
    print('main over')
    ret1=await task1
    ret2=await task2
    print(ret1,ret2)

asyncio.run(main())
```
```
import asyncio

async def func():
    print(1)
    await asyncio.sleep(2)
    print(2)
    return 'value'

async def main():
    print('main start')
    tasks=[asyncio.creat_task(func()),asyncio.creat_task(func())]
    print('main over')
    done,pending=await asyncio.wait(tasks,timeout=None)
    print(done)

asyncio.run(main())
```
- **future**
- **concurrent.future.Future**
```
import time
from concurrent.futures import Future
from concurrent.futures.thread import ThreadPooExecutor
from concurrent.futures.process import ProcessPoolExecutor

def func(value):
    time.sleep(1)
    print(value)
    reture 123

pool=ThreadPoolExecutor(max_workers=5)
# pool=ProcessPoolExecutor(max_worker=5)
for i in range(10):
    fut=pool.submit(func,i)
    print(fut)

```
```
import aiohttp
import asyncio
async def fetch(session,url):
    print('send request',url)
    async with session.get(url,verify_ss=False)as response:
        text=await response.text()
        print('result',url,len(text))
async def main():
    async with aiohttp.ClientSession()as session:
        url_list=[
            'http://python.org',
            'http://www.baidu.com',
            'http://www.pythonav.com
        ]
        tasks=[asyncio.creat_task(fetch(session,url))for url in url_list]
        await asyncio.wait(tasks)
if __name__=='__main__':
    asyncio.run(main())
```
